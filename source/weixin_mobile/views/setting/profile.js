'use strict';angular.module('zenmezApp')  .controller('ProfileCtrl', function ($scope , $http , FileUploader , $location) {  	$scope.model = {};  	$scope.clicked = false;  	var baseService = "/mobile/user/setup/";    var uploader = $scope.uploader = new FileUploader({          url: baseService,          alias : 'user_img'      });    var promise = $http.get(baseService);    promise.success(function(data){    	$scope.model = data;    });    promise.error(function(e){    	console.log("error");    });    uploader.onCompleteAll = function(data){      $scope.clicked = false;      $location.url('/home');    };    $scope.onTriggerClick = function(){      uploader.clearQueue();      $('#file_profile').trigger('click');    };    $scope.onPush = function(topic){      delete topic.stat;      delete topic.head_photo;      $scope.clicked = true;      var promise = $http.post(baseService , topic);      promise.success(function(data){        if(data.stat == '1000'){          var url ='/mobile/user/photo/upload/';          if(uploader.queue.length == 0){            $scope.clicked = false;            $location.url('/home');            return;          }          if(uploader.queue.length != 0) {	          angular.forEach(uploader.queue, function(item) {	            item.url = url;	          });	          uploader.uploadAll();	      }        }      });      promise.error(function(data){      	console.log(data);        console.log("与服务器交互错误!");      });    };   })  .config(function($stateProvider) {  $stateProvider	  .state('profile', {	    url: "/profile",	    templateUrl: "views/setting/profile.tpl.html",	    controller : 'ProfileCtrl'	  });});